<!DOCTYPE html>
<html lang="en">
    <head><title> Sign Up</title> </head>
    <link rel="stylesheet" href="../../assets/css/signup style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
    <body>
        
        <form onsubmit="signUp(event)">
        <div id="object"class="section">           
        <div id="object" class="popup">
            <h1>SIGN UP</h1>
            <p> PLEASE FILL THE DETAILS</p> 
            <div class="total">
            <div class="space">
            <label for="Email"><b>Email Id</b></label>
            <input type= "email" required="true" id="email" >
            </div>
            <div class="space1">
            <label for="pas"><b>password</b></label>
            <input type="password" id="password" required>
            </div>
            <div class="space1">
           <label><b>Full Name</b></label>
           <input type="text" id="name" pattern="[a-zA-z0-9]+">
            </div>
            <div class="space1">
            <label><b>Your Age</b></label>
            <input type="number" min="16" max="70" id="age" style="width: 39%; position: relative; left: 3px;">

            </div>
            </div>
            <div class="space2">
            <label for="tandc">
            <input type="checkbox" id="T&C" style="margin-bottom: 15px; position: relative;right: 10px;"><b>Agree with T&C</b>
            </label></div>
            <div class="space3">
            <label for="notify">
                <input type="checkbox" id="notice" style="margin-bottom: 15px; position: relative; right: 3px;"><b>notify me offer in mail</b>
            </label></div>
            <div class="select1"> 
                <input type="checkbox" id="buyer" class="type">Buyer
                <input type="checkbox" id="seller" class="type" >For to sell
            </div>
            <p>By creating an account you agree to our <a href="#" style="color:dodgerblue">Terms & Privacy</a>.</p>
            <div class="select2">
                <button type="reset" style="background-color:rgb(118, 0, 0); color: white; cursor: pointer;">Reset</button> 
                <button type="submit" style="background-color:green; cursor: pointer;">Sign Up</button>
            </div>
            <div>

            </div>
        </div>

</div> 
</form>

        <script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuidv4.min.js"></script>    

         <script>

const buyerRadio = document.getElementById('buyer');
const sellerRadio = document.getElementById('seller');

buyerRadio.addEventListener('change', () => {
  if (buyerRadio.checked) {
    sellerRadio.checked = false;
    localStorage.setItem('userRole', 'buyer');
  }
});

sellerRadio.addEventListener('change', () => {
  if (sellerRadio.checked) {
    buyerRadio.checked = false;
    localStorage.setItem('userRole', 'seller');
  }
});

// When the page loads, check if the user's role is already stored in local storage
const savedUserRole = localStorage.getItem('userRole');
if (savedUserRole === 'buyer') {
  buyerRadio.checked = true;
} else if (savedUserRole === 'seller') {
  sellerRadio.checked = true;
}
            
            
    function signUp (e) {
        e.preventDefault();
    let user_email = document.getElementById("email").value;
        user_password = document.getElementById("password").value;
        user_name = document.getElementById("name").value;
        user_age = document.getElementById("age").value;
        user_unique_id = uuidv4();
      
    let user_list = JSON.parse(localStorage.getItem('user_list')) || [];
    let exist = user_list.length &&
        JSON.parse(localStorage.getItem('user_list')).some(data =>
            data.user_email.toLowerCase() == user_email.toLowerCase()
        );
    if(!exist){
        user_list.push({ user_name,  user_email, 
                        user_password, user_age,user_unique_id,});
        localStorage.setItem('user_list', JSON.stringify(user_list));
        console.log(localStorage.getItem('user_list'));
        document.querySelector('form').reset();
        document.getElementById('password').focus();
        document.getElementById('email').focus();
        document.getElementById('age').focus();
        document.getElementById('name').focus();
        alert('Account created Successfully');
        location.href="../login page/log in.html"
        
    }
    else{
        alert('Sorry the User already Exist!! \n Try with different Phone number or email or try login');
        document.querySelector('form').reset();
    }
    
    
}

        </script>


    </body>
</html>